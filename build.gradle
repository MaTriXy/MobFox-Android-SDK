buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:1.1.+'
    }
}
apply plugin: 'android-library'
repositories {
    jcenter()
}
android {
    compileSdkVersion 15
    buildToolsVersion "22.0.1"

    defaultConfig {
        minSdkVersion 15
        targetSdkVersion 22
    }

    lintOptions {
        abortOnError false
    }

    sourceSets {
        main {
            java {
                srcDir 'src/java'
            }

            resources {
                srcDir 'src/resources'
            }
        }

    }

    targetCompatibility = 1.6

    dependencies {
        compile 'com.google.android.gms:play-services:7.0.0'
        compile fileTree(dir: 'libs', include: ['*.jar'])
        compile fileTree(dir: 'partner_sdks', include: ['*.jar'])

    }

}
task unitTest(type: Exec, dependsOn: assemble) {
    description = "run unit tests"
    commandLine './unittests.sh'
}
build.dependsOn unitTest
task clearJar(type: Delete) {
    delete 'build/outputs/MobFox-Android-SDK.jar'
}
task makeJar(type: Copy) {
    from('build/intermediates/bundles/release/')
    into('build/outputs/')
    include('classes.jar')
    rename('classes.jar', 'MobFox-Android-SDK.jar')
}
makeJar.dependsOn(clearJar, build)
defaultTasks 'makeJar'
dependencies {
}